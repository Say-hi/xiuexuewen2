"use strict";function getUrlParam(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(t);return null!=a?decodeURI(a[2]):null}function getData(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return $(".modal").show(),new Promise(function(t,a){$.post(baseDomain+"/shop/profit-list",{mid:localStorage.getItem("mid"),uid:e.uid,page:++page},function(a){nomore=a.data.lists.length<a.data.pre_page?1:0;var n=template("item",{target:a.data.lists,type:type});a.data.lists.length?("refresh"==e.type||1==page?$(".container").html(n):$(".container").append(n),nomore>=1&&$(".container").append("<div class='tac f28 c999 p20'>--- 别扯了，到底了 ---</div>")):1==page?$(".container").html(n):$(".container").append(n),$(".modal").hide(),t(a)})})}function scrollPage(){if($(this).scrollTop()+$(this).height()==$(document).height()){if(console.dir("我到底部了"),nomore>=1)return;getData()}0==$(this).scrollTop()&&(page=0,nomore=0,$("input").val(""),getData({type:"refresh"}),console.dir("我到头部了"))}var baseDomain="https://teach.idwenshi.com/teach/api/web/index.php",page=0,nomore=0,type="shouyi",data=[{number:"1234234",money:100,status:1,time:new Date},{number:"1234234",money:100,status:2,time:new Date},{number:"1234234",money:100,status:3,time:(new Date).toLocaleTimeString()},{number:"1234234",money:100,status:1,time:(new Date).toLocaleDateString()},{number:"1234234",money:100,status:1,time:(new Date).toLocaleString()},{number:"1234234",money:100,status:3,time:(new Date).toLocaleString()}];$(function(){new VConsole,$("#__vconsole").hide();var e=0;$(".show-console").click(function(){++e>=10&&$("#__vconsole").show()});var t=!1;$(".show-mini-img").hide(),$(".show-mini-program").click(function(){t?$(".show-mini-img").hide(500):$(".show-mini-img").show(500),t=!t}),FastClick.attach(document.body),type=getUrlParam("type"),getData({type:"refresh"}),$(".record-tab-tab span").click(function(){$(".record-tab-tab span").removeClass("c2ca2f2"),$(this).addClass("c2ca2f2"),$(".modal").show();var e=template("item",{target:data});setTimeout(function(){$(".container").html(e),$(".modal").hide()},1e3)}),$("form").on("submit",function(){return $("input").val().length<=0?alert("请输入内容"):($("input").blur(),page=0,nomore=0,getData({type:"refresh",uid:$("input").val()}),!1)}),$(window).scroll(scrollPage)});