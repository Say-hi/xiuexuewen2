"use strict";function getUrlParam(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(e);return null!=a?decodeURI(a[2]):null}function getData(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"refresh"==t.type&&(page=0,nomore=0),$(".modal").show(),new Promise(function(e,a){$.post(baseDomain+("user"==type?"/user/cash-detail":"/shop/appear-list"),"user"==type?{uid:getUrlParam("id")||localStorage.getItem("mini_id"),status:tabIndex,page:++page}:{mid:localStorage.getItem("mid"),status:tabIndex,uid:getUrlParam("id"),page:++page},function(a){try{var r=!0,n=!1,i=void 0;try{for(var o,s=a.data.lists[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value;c.create_time=new Date(1e3*c.create_time).toLocaleString(),c.finish_time=new Date(1e3*c.finish_time).toLocaleString()}}catch(t){n=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(n)throw i}}}catch(t){throw t}nomore=a.data.lists.length<a.data.pre_page?1:0;var l=template("item",{target:a.data.lists,type:"agents"==type});a.data.lists.length?("refresh"==t.type||1==page?$(".container").html(l):$(".container").append(l),nomore>=1&&$(".container").append("<div class='tac f28 c999 p20'>--- 别扯了，到底了 ---</div>")):1==page?$(".container").html(str):$(".container").append(str),$(".modal").hide(),e(a)})})}function scrollPage(){if($(this).scrollTop()+$(this).height()==$(document).height()){if(nomore>=1)return;getData(),console.dir("我到底部了")}0==$(this).scrollTop()&&(getData({type:"refresh"}),console.dir("我到头部了"))}var baseDomain="https://teach.idwenshi.com/teach/api/web/index.php",tabIndex=0,page=0,nomore=0,str="<div class='tac f28 c999'>--- 哎呀,没有相关数据 ---</div>",uid=0,type="user";$(function(){var t=0;$(".show-console").click(function(){++t>=10&&new VConsole}),FastClick.attach(document.body),$(window).scroll(scrollPage),type=getUrlParam("type")||"user","agents"==getUrlParam("type")&&$("title").html("提现记录列表");try{tabIndex=getUrlParam("index")||0,$(".record-tab span").removeClass("c2ca2f2").eq(tabIndex).addClass("c2ca2f2")}catch(t){throw t}getData({type:"refresh"}),$(".record-tab span").click(function(){$(".record-tab span").removeClass("c2ca2f2"),$(this).addClass("c2ca2f2"),tabIndex=$(this).attr("data-type"),getData({type:"refresh"})}),$(".item").click(function(){console.log($(this).html())})});