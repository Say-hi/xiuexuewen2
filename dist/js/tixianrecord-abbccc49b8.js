"use strict";function getUrlParam(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(e);return null!=a?decodeURI(a[2]):null}function getData(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return $(".modal").show(),new Promise(function(e,a){$.post(baseDomain+"/user/cash-detail",{uid:localStorage.getItem("mini_id"),where:tabIndex,page:++page,out_trade_no:t.out_trade_no||null,time_start:2==tabIndex?((new Date).getTime()/1e3).toFixed(0):needDate?new Date(starData).getTime()/1e3:t.time_start||null,time_end:2==tabIndex?0:needDate?new Date(endData).getTime()/1e3:t.time_start||null},function(a){var n=!0,o=!1,i=void 0;try{for(var r,l=a.data.lists[Symbol.iterator]();!(n=(r=l.next()).done);n=!0){var c=r.value;c.create_time=new Date(1e3*c.create_time).toLocaleString(),c.finish_time=new Date(1e3*c.finish_time).toLocaleString()}}catch(t){o=!0,i=t}finally{try{!n&&l.return&&l.return()}finally{if(o)throw i}}nomore=a.data.lists.length<a.data.pre_page?1:0;var s=template("item",{target:a.data.lists});setTimeout(function(){a.data.lists.length?("refresh"==t.type||1==page?$(".container").html(s):$(".container").append(s),nomore>=1&&$(".container").append("<div class='tac f28 c999 p20'>--- 别扯了，到底了 ---</div>")):1==page?$(".container").html(str):$(".container").append(str),$(".modal").hide()},1e3),e(a)})})}function scrollPage(){if($(this).scrollTop()+$(this).height()==$(document).height()){if(nogo)return;nogo=!0,console.dir("我到底部了"),$(".modal").show(),setTimeout(function(){var t=template("item",{target:data});$(".container").append(t),$(".modal").hide(),nogo=!1},2e3)}0==$(this).scrollTop()&&console.dir("我到头部了")}var baseDomain="http://teach.idwenshi.com/teach/api/web/index.php",tabIndex=1,page=0,nomore=0,needDate=!1,str="<div class='tac f28 c999'>--- 哎呀，没有相关数据了 ---</div>",nogo=!1;$(function(){FastClick.attach(document.body),"agents"==getUrlParam("type")&&$("title").html(getUrlParam("id")),$(".modal").show();var t=template("item",{target:data});setTimeout(function(){$(".container").html(t),$(".modal").hide()},1e3),$(".record-tab span").click(function(){$(".record-tab span").removeClass("c2ca2f2"),$(this).addClass("c2ca2f2"),$(".modal").show();var t=template("item",{target:data});setTimeout(function(){$(".container").html(t),$(".modal").hide()},1e3)}),$(window).scroll(scrollPage),$(".item").click(function(){console.log($(this).html())})});